name: Laravel Deployment

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    # - name: Set up PHP
    #   uses: shivammathur/setup-php@v2
    #   with:
    #     php-version: '8.1'

    # - name: Install Dependencies
    #   run: composer install --no-dev --optimize-autoloader

    # - name: Set up Node.js
    #   uses: actions/setup-node@v4
    #   with:
    #     node-version: '20'

    # - name: Install Node.js Dependencies
    #   run: npm install

    # - name: Build assets
    #   run: npm run production

    - name: Deploy to Server
      uses: yankewei/laravel-deploy-action@main
      with:
        host: ${{ secrets.SSH_HOST_ONE_BUILD_PLUS }}
        # port: ${{ secrets.SSH_PORT_ONE_BUILD_PLUS }}
        port: "65002"
        username: ${{ secrets.SSH_USERNAME_ONE_BUILD_PLUS }}
        password: ${{ secrets.SSH_PASSWORD_ONE_BUILD_PLUS }}
        # script: |
        #   cd ./obp/test/
        #   git pull origin main
        #   php artisan optimize
